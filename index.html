<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>생기부 문장 생성기 (200~500자)</title>
  <meta name="description" content="행사/키워드와 활동 기간을 넣으면 200~500자 사이의 생기부용 문장을 생성합니다. 개인정보는 수집하지 않습니다."/>
  <style>
    :root{--bg:#0b1220;--card:#101a2b;--muted:#98a6c7;--text:#ecf2ff;--accent:#76a7ff}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(120deg,#0b1220,#101a2b 60%);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Malgun Gothic,sans-serif}
    .wrap{max-width:900px;margin:36px auto;padding:0 16px}
    .card{background:#0e1728;border:1px solid #24324e;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:18px;margin-bottom:14px}
    h1{font-size:22px;margin:0 0 8px}
    label{display:block;font-size:12px;color:var(--muted);margin:2px 0 6px}
    input,select,textarea{width:100%;background:#0c1424;border:1px solid #283659;color:var(--text);padding:12px;border-radius:12px;outline:none}
    input:focus,select:focus,textarea:focus{border-color:var(--accent)}
    textarea{min-height:100px;resize:vertical}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .row>*{flex:1 1 260px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 14px;border-radius:12px;border:1px solid #2a3b62;background:#0c1424;color:var(--text);cursor:pointer}
    .btn.primary{background:linear-gradient(120deg,#79a9ff,#99bbff);color:#071022;border:0;font-weight:700}
    .btn.ghost{border:1px dashed #34507f;color:var(--muted)}
    .counter{font-size:12px;color:var(--muted)}
    .output{white-space:pre-wrap;line-height:1.6}
    .chips{display:flex;gap:6px;flex-wrap:wrap}
    .chip{border:1px solid #2a3b62;border-radius:999px;padding:2px 8px;font-size:11px;color:var(--muted)}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>생기부 문장 생성기 <span class="chip">200~500자</span></h1>
    <div class="chips"><span class="chip">이름 미포함</span><span class="chip">행사명 뒤 (YYYY.MM.DD.-YYYY.MM.DD.)</span><span class="chip">브라우저 로컬 처리</span></div>
    <div class="row" style="margin-top:10px">
      <div>
        <label>행사/키워드</label>
        <input id="event" placeholder="예: 과학탐구 토론대회" />
      </div>
      <div>
        <label>활동 기간 (예: 2000.03.01.-2020.03.01. / 2025년 5~6월)</label>
        <input id="date" placeholder="예: 2000.03.01.-2020.03.01." />
      </div>
    </div>
    <div class="row">
      <div>
        <label>활동 유형</label>
        <select id="category">
          <option>교내 대회</option><option>독서 토론</option><option>과학 탐구</option><option>봉사 활동</option><option>동아리</option>
          <option>공모전</option><option>발표/세미나</option><option>체육대회</option><option>진로 탐색</option><option>캠프/연수</option>
        </select>
      </div>
      <div>
        <label>표현 톤</label>
        <select id="tone">
          <option value="basic">기본 서술형</option>
          <option value="reflect">성찰형</option>
          <option value="team">협업/리더십형</option>
          <option value="problem">문제해결형</option>
          <option value="growth">성장/확장형</option>
        </select>
      </div>
    </div>
    <label>세부 활동/성과 (선택)</label>
    <textarea id="details" placeholder="예: 팀 자료 조사 총괄, 변수 통제 실험 설계 등"></textarea>
    <div class="row" style="margin-top:10px">
      <button class="btn primary" id="generate">문장 생성</button>
      <button class="btn" id="shuffle">다시 생성</button>
      <button class="btn ghost" id="copy">복사</button>
      <button class="btn ghost" id="download">.txt 저장</button>
    </div>
  </div>

  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <strong>생성 결과</strong>
      <span class="counter" id="count">0자 / 500자</span>
    </div>
    <div id="output" class="output" style="margin-top:10px;min-height:120px"></div>
  </div>

  <p class="counter">© 2025 • 단일파일 정적 페이지 • 개인정보 미수집</p>
</div>

<script>
// ===== 유틸 =====
function pad2(n){ n=String(n||''); return n.length===1? '0'+n : n; }
function tokenizeDate(s){
  const m = String(s||'').match(/(\d{4})(?:[.\-\/]?(\d{1,2}))?(?:[.\-\/]?(\d{1,2}))?/);
  if(!m) return null; return [m[1], m[2], m[3]].filter(Boolean);
}
function fmtOneDate(tokens){ const [y,m,d]=tokens||[]; let out=String(y)+'.'; if(m) out+=pad2(m)+'.'; if(d) out+=pad2(d)+'.'; return out; }
function formatDateParen(raw){
  if(!raw || !String(raw).trim()) return '';
  let s=String(raw).trim();
  s=s.replace(/년|\//g,'.').replace(/월/g,'.').replace(/일/g,'.'); // 단위 제거→점
  s=s.replace(/[~–—]+/g,'-').replace(/\s+/g,'');
  s=s.replace(/\.+/g,'.').replace(/^\./,'').replace(/\.$/,'');
  let parts=s.split('-'); if(parts.length>2){ parts=[parts[0], parts[parts.length-1]]; }
  const left = tokenizeDate(parts[0]);
  const right = parts[1]? tokenizeDate(parts[1]) : null;
  let leftStr = left? fmtOneDate(left):'';
  let rightStr='';
  if(right){
    if(right.length===1) rightStr=fmtOneDate([left?.[0], right[0]]);
    else if(right.length===2) rightStr=fmtOneDate([left?.[0], right[0], right[1]]);
    else rightStr=fmtOneDate(right);
  }
  const body = right? (leftStr+'-'+rightStr) : leftStr;
  return body? '('+body+')' : '';
}
function charLen(s){ return [...(s||'')].length }
function clamp200to500(s, details){
  let t=(s||'').trim();
  while(charLen(t)<200){ t += ' ' + (details||'관련 활동') + '을(를) 통해 탐구를 심화하고 결과를 정리하였다.'; if(charLen(t)>520) break; }
  if(charLen(t)>500){ t=[...t].slice(0,500).join(''); if(!/[.!?다]$/.test(t)) t+='…'; }
  return t;
}
function sanitize(s){ return (s||'').trim().replace(/[\s\u00A0]+/g,' ').replace(/\s([,.!?])/,'$1') }
function hasBatchim(word){
  if(!word) return false; const ch=[...word.replace(/\([^)]*\)/g,'').trim()].pop();
  if(!ch) return false; const code=ch.codePointAt(0);
  if(code>=0xAC00 && code<=0xD7A3){ const jong=(code-0xAC00)%28; return jong!==0; }
  return false;
}
function josa(word, pair){ const [a,b]=pair.split('/'); return hasBatchim(word)?a:b; }

// ===== 템플릿 =====
const templates={
  basic:[
    "{evdate}{j_에} 참여하여 {details}을(를) 중심으로 활동 전반을 성실히 수행하였다. 자료 탐색→정리→발표의 과정을 꾸준히 이어가며 책임감을 보였고, 해당 경험을 이후 학습으로 연결해 이해의 폭을 넓혔다.",
    "{evdate}{j_에서} 계획 수립부터 실행·정리까지 과정을 충실히 이행하였다. 특히 {details}을(를) 수행하며 표현력과 문제 인식 능력이 향상되었고 협업 태도가 성숙해졌다."
  ],
  reflect:[
    "{evdate}{j_에서} 목표를 세우고 과정 중 한계를 점검하였다. {details}을(를) 수행한 후 개선 방향을 도출해 다음 과제에 적용하는 등 성찰적 태도를 보였다.",
    "{evdate}{j_에} 참여하며 근거 기반으로 생각을 정리하고 토의 후 느낀 점을 기록하였다. {details} 과정을 통해 자기주도 학습 습관을 형성하였다."
  ],
  team:[
    "{evdate}{j_에서} 역할을 분담하고 의견을 조율하며 협력적 해결책을 도출하였다. 일정과 소통을 주도해 결과물의 완성도를 높였고, {details} 과정에서 팀워크가 강화되었다.",
    "{evdate}{j_에서} 팀 내 조율자 역할을 맡아 갈등을 중재하고 공통 목표로 방향을 맞췄다. {details}에 주도적으로 참여해 프로젝트의 완성도를 높였다."
  ],
  problem:[
    "{evdate}{j_에서} 핵심 문제를 정의하고 조사→가설 설정→검증 순서로 해결 과정을 설계하였다. {details}을(를) 수행하며 오류를 수정하고 대안을 제시하였다.",
    "{evdate}{j_에} 참여해 변수 통제와 근거 제시를 중시하여 논리적 결론을 도출하였다. {details}을(를) 통해 탐구 역량이 고르게 향상되었다."
  ],
  growth:[
    "{evdate}{j_을를} 통해 초기의 어려움을 꾸준한 연습과 피드백으로 극복하였다. {details}을(를) 기반으로 학습 범위를 확장하고 자기주도성을 높였다.",
    "{evdate}{j_에} 참여하며 지식 습득을 실제 적용으로 연결하였다. {details}을(를) 수행하며 성실성과 끈기가 돋보였다."
  ]
};
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)] }

// ===== 생성 =====
function generate(){
  const ev=sanitize(document.getElementById('event').value);
  const dateRaw=sanitize(document.getElementById('date').value);
  const cat=document.getElementById('category').value;
  const detailsInput=sanitize(document.getElementById('details').value);
  const tone=document.getElementById('tone').value;
  if(!ev){ alert('행사/키워드를 입력하세요.'); return; }
  const defaults={
    '독서 토론':'주제 관련 자료 탐독과 근거 제시 토론 참여',
    '과학 탐구':'변수 통제 실험 설계와 결과 분석',
    '봉사 활동':'지역사회 요구를 파악하여 지속적 봉사 수행',
    '동아리':'정기 모임에서 발표와 피드백 순환',
    '교내 대회':'사전 학습 계획 수립 및 모의 연습',
    '공모전':'주제 분석과 제출물 완성도 향상에 기여',
    '발표/세미나':'자료 조사와 발표 리허설 주도',
    '체육대회':'역할 수행과 팀워크 강화',
    '진로 탐색':'직무 정보 탐색과 인터뷰 정리',
    '캠프/연수':'기초 지식 보강과 활동 보고서 작성'
  };
  const det = detailsInput || defaults[cat] || '관련 활동';
  const dp = formatDateParen(dateRaw); // (YYYY.MM.DD.-YYYY.MM.DD.) 또는 (YYYY.MM.)
  const evdate = ev + (dp||'');
  const pool = templates[tone] || templates.basic;
  const tpl = pick(pool);
  let text = tpl
    .replaceAll('{evdate}', evdate)
    .replaceAll('{details}', det)
    .replaceAll('{j_에}', josa(evdate,'에/에'))
    .replaceAll('{j_에서}', josa(evdate,'에서/에서'))
    .replaceAll('{j_을를}', josa(evdate,'을/를'));
  text = clamp200to500(text, det);
  document.getElementById('output').textContent = text;
  document.getElementById('count').textContent = charLen(text) + '자 / 500자';
}

// ===== 이벤트 =====
document.getElementById('generate').addEventListener('click', generate);
document.getElementById('shuffle').addEventListener('click', generate);
document.getElementById('copy').addEventListener('click', async()=>{
  const t=document.getElementById('output').textContent.trim(); if(!t) return;
  try{ await navigator.clipboard.writeText(t); alert('복사되었습니다.'); }catch(e){ prompt('아래 내용을 복사하세요:', t); }
});
document.getElementById('download').addEventListener('click', ()=>{
  const t=document.getElementById('output').textContent.trim(); if(!t) return;
  const blob=new Blob([t],{type:'text/plain;charset=utf-8'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='생기부_문장.txt'; a.click(); URL.revokeObjectURL(a.href);
});
</script>
</body>
</html>
